# adb-overwatch-regional-config

This module deploys the regional Azure required resources for a multi-workspace Overwatch deployment :
- Storage account to store the logs generated by the workspaces where Overwatch will be deployed
- Role assignment of the SPN to the storage account created above
- Eventhub namespace and Eventhub namespace authorization rule
- Azure Key-Vault with its access policy
- Azure Vault secret to store the SPN secret value

## Inputs

| Name           | Description                                                                                                                                                  | Type   | Default               | Required |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|-----------------------|----------|
|`rg_name`| Resource group name                                                                                                                                          | string || yes                   |
|`overwatch_spn_app_id`| Azure SPN ID                                                                        | string || yes                   |
|`overwatch_spn_secret`| Azure SPN secret | string || yes                   |
|`logs_sa_name`| Logs storage account name | string || yes                   |
|`key_vault_prefix`| AKV prefix to use when creating the resource | string || yes                   |
|`random_string`| Random string used as a suffix for the resources names | string || yes                   |
|`ehn_name`| Eventhubs namespace name | string | | yes      |

## Ouputs

| Name           | Description                                                                             |
|----------------|-----------------------------------------------------------------------------------------|
|`ehn_name`| Eventhubs namespace name |
|`ehn_ar_name`| Eventhubs namespace authorization rule name     |
|`logs_sa_name`| Logs storage account name     |
|`akv_name`| Azure Key-Vault name                                                                    |